<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Productos</title>
  <link rel="stylesheet" href="tienda.css">
  <script src="tienda.js"></script>
</head>

<body>

<header>
  <h2>TecMarket</h2>
  <nav>
    <a href="index.html">Inicio</a>
    <a href="productos.html">Productos</a>
    <a href="carrito.html">Carrito ðŸ›’</a>
    
  </nav>
</header>

<div class="container">
  <h1>Productos</h1>
  <div id="gridProductos" class="grid"></div>
</div>

<script>
    async function cargarProductos() {
      const res = await fetch("/api/products");
      const productos = await res.json();
    
      const grid = document.getElementById("gridProductos");
      grid.innerHTML = "";
    
      productos.forEach(p => {
        grid.innerHTML += `
          <div class='card'>
            <h3>${p.name}</h3>
            <p>${p.description || "Sin descripciÃ³n"}</p>
            <p><b>$${p.price}</b></p>
    
            <button onclick="agregarCarrito(${p.id})">Agregar al carrito ðŸ›’</button>
            <a href="producto.html?id=${p.id}">
              <button class='btn-green'>Ver detalle</button>
            </a>
          </div>
        `;
      });
    }
    
    async function agregarCarrito(id) {
      await clientFetch("/api/cart/add", {
        method: "POST",
        body: JSON.stringify({ productId: id, quantity: 1 })
      });
    
      alert("Producto agregado ðŸ›’");
    }
    
    cargarProductos();
    </script>
    

</body>
</html>
